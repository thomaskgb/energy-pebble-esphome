wifi:
  power_save_mode: none  # Disable power saving for faster response
  
  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Energy Pebble"
    # No password = open access point for easy initial configuration
  output_power: 8.5


  on_connect:
    - delay: 2s  # Small delay to ensure connection is stable
    - logger.log:
        level: INFO
        format: "WiFi connected - triggering initial API call"
    # Update device info sensors on WiFi connect
    - text_sensor.template.publish:
        id: device_id
        state: !lambda |-
          uint64_t mac = ESP.getEfuseMac();
          char mac_str[13];
          sprintf(mac_str, "%012llx", mac);
          return std::string(mac_str);
    - component.update: local_ip_address
    - script.execute: simple_api_call
    - script.execute: check_firmware_update

captive_portal:

# Web server for configuration and manual control
web_server:
  port: 80
